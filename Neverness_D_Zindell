puts
puts "Это квест по мотиву книги Дэвида Зинделла \"Хранитель времени\".
\n
...В будущем человечество строит города в Галактике и давно уже пробирается на Нептун.
\"Невернесс\" - её научный и культурный центр. Вам повезло." .each_char {|c| print c; sleep 0.06}

sleep(2)
puts
puts "Сейчас Вы студент младшего курса Академии и пока носите серую форму.
Пора определяться cо специальностью."
puts
puts "Какого цвета выберете себе форму?"
puts "1. чёрную
2. зелёную
3. жемчужно-белую
4. буду ходить в чём хочу"
puts
#cheatcode = красную. Это форма горологов
# ч = пилоты, белая = скраер, з = механик, без = прогер
choice = gets.chomp

if choice == "красную" #горолог
	puts "А, вы, видимо, элита? Такую форму носят горологи - изобретатели устройств по измерению времени.
	Хранитель Времени всегда (тайно!) выбирается из горологов, чтобы затем править 2000 лет.
	Вы сразу попадаете к вашей миссии.
	1.Да"
  gets.chomp
	puts "Ваша задача - стать главой президиума. Хранитель Времени наблюдает за любыми изменениями и обладает поразительной памятью.
	Ответьте:"
	sleep(1)
				time = Time.new
        time = time.hour.to_s
	сhoice = nil			# циклический вариант проверки
	until choice == "1" || choice == "2" || choice == "3" do
	puts "Могла ли быть солнечная погода 36 суток тому назад?
	1. Да
	2. Нет
	3. Не следил за погодой."
  	choice = gets.chomp
  end



        if choice == "1"
        	  if time = (05..20).to_s
        		true
   			abort "Логично! 36 суток тому назад был день. А теперь, как будущий руководитель, узнайте, что делают другие профессиям. До свидания"
            else
             	abort "Тест провален"
 		    		end
        elsif choice == "2"
        	if time != (05..20).to_s
        		true
   			abort "Логично. 36 суток назад была ночь. А теперь, как будущий руководитель, узнайте, что надо делать другим профессиям. До свидания"
   				else
   			abort "Тест провален"
   				end
							else
							abort "Тест провален"
	    				end

elsif choice == "1"
		profession = "пилот".to_s
elsif choice == "2"
		profession = "механик".to_s
elsif choice == "3"
		profession = "скраер".to_s
elsif choice == "4"
		profession = "программист".to_s
end
puts "Вы выбрали форму #{profession}a. Рассчитываем миссию..."
sleep(1)
# или - Тестирование, чтобы узнать, подходите ли вы."
var = choice

if var == "1"
	puts "Вы - пилот и можете управлять мультиплексом и деформировать время, ускоряя сознание."
	puts "В перелётах между звёздами есть нечто вроде \"проклятого места\" где гибнут многие. Ваш выбор....\n
		1. Исследовать это место \n
		2. Заняться пассажирскими перелётами"
		choice = gets.chomp
		if choice == "1"
			puts "Инспектор привёл вас в кабину. Вы надели шлем и открыли отсек экстренного управления. - Если ты попадёшь во временной луп - нажимай кнопку. Cам не выберешься. Машина вытащит. Запомнил? Нажимай кнопку. Нажимай кнопку.
			Поехали?
			1. Да"
			gets.chomp
			now = Time.now
				puts "Система загружена, корабль готов к старту. На панели мерцает надпись:"
				puts
				puts now.to_s + ".\n\"Введите планету:\"
				1. Повторить прошлую траекторию
				2. - А какая миссия?"
				choice = gets.chomp
				if choice == "2"
					abort "Серьёзно? Выходите из машины."

						elsif choice == "Нептун"

							puts "А Вы молодец. Летим!"
							sleep(1)
									puts Time.now.to_s + " Полёт нормальный. Внезапно..."
									puts
									sleep(2)
									puts "1.В иллюминатор постучали."
									puts "2.Рычаг управления раскалился"
									puts "3.Раздался звонок."
									choice = gets.chomp

							if choice == "1" or "2" or "3"
							puts "Я резко дёрнулся. И тут перестал понимать, почему я нахожусь в кабине. Информация стёрта.
						    Рядом стоит инструктор и говорит на иностранном языке.
							  Затем я вижу, как снимаю  шлем и, почему-то спиной, выхожу из кабины.
							 Какую фразу говорит инспектор?"
							puts "1 нажимай кнопку!".reverse
							puts "2. It's a trap!"
							puts "3. ничего не трогай".reverse

							choice = gets.chomp

							 if choice == "1"
							 	puts
							 	puts "Поздравляю! Машине удалось выбраться из временной петли. На сегодня миссия закончена. Возвращайтесь."
							 end
end
								elsif choice == "1"
								puts "То есть вот так просто, как в Скедня.Еде? Хорошо."
								sleep(1)
								puts "Летим на астероид \#53257. В прошлый раз пилот погиб и корабль вернулся сам.
								Выбора нет - вы будете исследовать это место."
								sleep(2)
								puts "Что происходит..."
								sleep(2)
								puts "Я перестал понимать, почему я нахожусь в кабине. Информация стёрта.
						    Рядом стоит инструктор и говорит на иностранном языке.
							  Затем я вижу, как снимаю  шлем и, почему-то спиной, выхожу из кабины.
							  Какую фразу говорит инспектор?"
							puts "1. нажимай кнопку!".reverse
							puts "2. It's a trap!"
							puts "3. К чёрту воспоминания, надо выбираться!"

							choice = gets.chomp

						# choice.between?(1.3) #вариант проверки
						# (1..3).include?(choice)

							 if choice == "1"
							 	puts "Поздравляю! Машине удалось выбраться из временной петли. На сегодня миссия закончена. Возвращайтесь."
							 end
						else
						puts "Туда маршрут ещё не проложен."
            end
end
	if choice == "2"
			abort "Увы, в Академии тренируют для науки. Вы не для нас."
end

# Здесь продолжается блок выбора профессии

	elsif var == "2"
		puts "Вы будете изучать физику и инженерные дисциплины. Ваш лучший друг - программист и ваша команда отвечает за техническую реализацию прогресса человечества."
		puts "Что будем делать?
		1. Создавать пилотируемый корабль
		2. Программировать нейронную сеть"
		choice = gets.chomp
		if choice == "1"
			abort "Амбициозно! Нарисуйте схему и возвращайтесь! Вы молодец!"
		else
			abort "Отличный выбор. Изучите эту тему и возвращайтесь"
		end

	elsif var == "3"
		puts "Скраеры становятся способными видеть будущее. Вам придётся научиться изъясняться загадками и отгадывать их."
		sleep(1)
		res = rand(2)
		puts "Какую цифру я загадал? 0 или 1?"
		choice = gets.to_i
		  if choice != res
		    puts "Не отгадали? Надо ещё потренироваться в ясновидении. Будем рады видеть вас снова, до свидания."
		  else
	      abort "Ого! Тут реально компьютер загадывал. Я вас ничему не могу больше научить, вы прекрасны."
		  end

		elsif var == "4"
		  puts "И сразу вопрос:
		Бывает ли так, что программа скомпилировалась с первого раза и без ошибок?
		1. Да, конечно
		2. Нет,это фантастика"
		choice = gets.chomp

		if choice == "1" or "2"
			puts "Вы правы, этот тест про фантастику."
			puts "Какой правильный ответ на вопрос про рекурсию?
				  1. Да.
			    2. Какой правильный ответ на вопрос про рекурсию?"
			      if choice == "1" or "2"
			      	puts "Какой правильный ответ на вопрос про рекурсию?"
			      	puts
			      	puts "11111bin?"
			      	choice = gets.chomp
			      	if choice == "31"
			      		puts "Вы летите на космолёте по дереву текущей реальности, рядом Грозовые тучи.
			      		Какой выход?"
			      		gets.chomp
			      		abort "Да вы просто архитектор матрицы. Прилетели. Спасибо за игру!"
			        end
			      end
		   end
end
